var He = Object.defineProperty;
var Ke = (t, r, e) => r in t ? He(t, r, {enumerable: true, configurable: true, writable: true, value: e}) : t[r] = e;
var B = (t, r, e) => (Ke(t, typeof r != "symbol" ? r + "" : r, e), e);
var le = function(t, r) {
  return le = Object.setPrototypeOf || {__proto__: []} instanceof Array && function(e, n) {
    e.__proto__ = n;
  } || function(e, n) {
    for (var i in n)
      Object.prototype.hasOwnProperty.call(n, i) && (e[i] = n[i]);
  }, le(t, r);
};
function Y(t, r) {
  if (typeof r != "function" && r !== null)
    throw new TypeError("Class extends value " + String(r) + " is not a constructor or null");
  le(t, r);
  function e() {
    this.constructor = t;
  }
  t.prototype = r === null ? Object.create(r) : (e.prototype = r.prototype, new e());
}
function Ye(t, r, e, n) {
  function i(o) {
    return o instanceof e ? o : new e(function(u) {
      u(o);
    });
  }
  return new (e || (e = Promise))(function(o, u) {
    function c(f) {
      try {
        s(n.next(f));
      } catch (y) {
        u(y);
      }
    }
    function a(f) {
      try {
        s(n.throw(f));
      } catch (y) {
        u(y);
      }
    }
    function s(f) {
      f.done ? o(f.value) : i(f.value).then(c, a);
    }
    s((n = n.apply(t, r || [])).next());
  });
}
function Fe(t, r) {
  var e = {label: 0, sent: function() {
    if (o[0] & 1)
      throw o[1];
    return o[1];
  }, trys: [], ops: []}, n, i, o, u;
  return u = {next: c(0), throw: c(1), return: c(2)}, typeof Symbol == "function" && (u[Symbol.iterator] = function() {
    return this;
  }), u;
  function c(s) {
    return function(f) {
      return a([s, f]);
    };
  }
  function a(s) {
    if (n)
      throw new TypeError("Generator is already executing.");
    for (; e; )
      try {
        if (n = 1, i && (o = s[0] & 2 ? i.return : s[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, s[1])).done)
          return o;
        switch (i = 0, o && (s = [s[0] & 2, o.value]), s[0]) {
          case 0:
          case 1:
            o = s;
            break;
          case 4:
            return e.label++, {value: s[1], done: false};
          case 5:
            e.label++, i = s[1], s = [0];
            continue;
          case 7:
            s = e.ops.pop(), e.trys.pop();
            continue;
          default:
            if (o = e.trys, !(o = o.length > 0 && o[o.length - 1]) && (s[0] === 6 || s[0] === 2)) {
              e = 0;
              continue;
            }
            if (s[0] === 3 && (!o || s[1] > o[0] && s[1] < o[3])) {
              e.label = s[1];
              break;
            }
            if (s[0] === 6 && e.label < o[1]) {
              e.label = o[1], o = s;
              break;
            }
            if (o && e.label < o[2]) {
              e.label = o[2], e.ops.push(s);
              break;
            }
            o[2] && e.ops.pop(), e.trys.pop();
            continue;
        }
        s = r.call(t, e);
      } catch (f) {
        s = [6, f], i = 0;
      } finally {
        n = o = 0;
      }
    if (s[0] & 5)
      throw s[1];
    return {value: s[0] ? s[1] : void 0, done: true};
  }
}
function q(t) {
  var r = typeof Symbol == "function" && Symbol.iterator, e = r && t[r], n = 0;
  if (e)
    return e.call(t);
  if (t && typeof t.length == "number")
    return {
      next: function() {
        return t && n >= t.length && (t = void 0), {value: t && t[n++], done: !t};
      }
    };
  throw new TypeError(r ? "Object is not iterable." : "Symbol.iterator is not defined.");
}
function N(t, r) {
  var e = typeof Symbol == "function" && t[Symbol.iterator];
  if (!e)
    return t;
  var n = e.call(t), i, o = [], u;
  try {
    for (; (r === void 0 || r-- > 0) && !(i = n.next()).done; )
      o.push(i.value);
  } catch (c) {
    u = {error: c};
  } finally {
    try {
      i && !i.done && (e = n.return) && e.call(n);
    } finally {
      if (u)
        throw u.error;
    }
  }
  return o;
}
function H(t, r, e) {
  if (e || arguments.length === 2)
    for (var n = 0, i = r.length, o; n < i; n++)
      (o || !(n in r)) && (o || (o = Array.prototype.slice.call(r, 0, n)), o[n] = r[n]);
  return t.concat(o || Array.prototype.slice.call(r));
}
function D(t) {
  return this instanceof D ? (this.v = t, this) : new D(t);
}
function Ze(t, r, e) {
  if (!Symbol.asyncIterator)
    throw new TypeError("Symbol.asyncIterator is not defined.");
  var n = e.apply(t, r || []), i, o = [];
  return i = {}, u("next"), u("throw"), u("return"), i[Symbol.asyncIterator] = function() {
    return this;
  }, i;
  function u(d) {
    n[d] && (i[d] = function(m) {
      return new Promise(function(_, l) {
        o.push([d, m, _, l]) > 1 || c(d, m);
      });
    });
  }
  function c(d, m) {
    try {
      a(n[d](m));
    } catch (_) {
      y(o[0][3], _);
    }
  }
  function a(d) {
    d.value instanceof D ? Promise.resolve(d.value.v).then(s, f) : y(o[0][2], d);
  }
  function s(d) {
    c("next", d);
  }
  function f(d) {
    c("throw", d);
  }
  function y(d, m) {
    d(m), o.shift(), o.length && c(o[0][0], o[0][1]);
  }
}
function $e(t) {
  if (!Symbol.asyncIterator)
    throw new TypeError("Symbol.asyncIterator is not defined.");
  var r = t[Symbol.asyncIterator], e;
  return r ? r.call(t) : (t = typeof q == "function" ? q(t) : t[Symbol.iterator](), e = {}, n("next"), n("throw"), n("return"), e[Symbol.asyncIterator] = function() {
    return this;
  }, e);
  function n(o) {
    e[o] = t[o] && function(u) {
      return new Promise(function(c, a) {
        u = t[o](u), i(c, a, u.done, u.value);
      });
    };
  }
  function i(o, u, c, a) {
    Promise.resolve(a).then(function(s) {
      o({value: s, done: c});
    }, u);
  }
}
function g(t) {
  return typeof t == "function";
}
function me(t) {
  var r = function(n) {
    Error.call(n), n.stack = new Error().stack;
  }, e = t(r);
  return e.prototype = Object.create(Error.prototype), e.prototype.constructor = e, e;
}
var ie = me(function(t) {
  return function(e) {
    t(this), this.message = e ? e.length + ` errors occurred during unsubscription:
` + e.map(function(n, i) {
      return i + 1 + ") " + n.toString();
    }).join(`
  `) : "", this.name = "UnsubscriptionError", this.errors = e;
  };
});
function fe(t, r) {
  if (t) {
    var e = t.indexOf(r);
    0 <= e && t.splice(e, 1);
  }
}
var Z = function() {
  function t(r) {
    this.initialTeardown = r, this.closed = false, this._parentage = null, this._finalizers = null;
  }
  return t.prototype.unsubscribe = function() {
    var r, e, n, i, o;
    if (!this.closed) {
      this.closed = true;
      var u = this._parentage;
      if (u)
        if (this._parentage = null, Array.isArray(u))
          try {
            for (var c = q(u), a = c.next(); !a.done; a = c.next()) {
              var s = a.value;
              s.remove(this);
            }
          } catch (l) {
            r = {error: l};
          } finally {
            try {
              a && !a.done && (e = c.return) && e.call(c);
            } finally {
              if (r)
                throw r.error;
            }
          }
        else
          u.remove(this);
      var f = this.initialTeardown;
      if (g(f))
        try {
          f();
        } catch (l) {
          o = l instanceof ie ? l.errors : [l];
        }
      var y = this._finalizers;
      if (y) {
        this._finalizers = null;
        try {
          for (var d = q(y), m = d.next(); !m.done; m = d.next()) {
            var _ = m.value;
            try {
              Te(_);
            } catch (l) {
              o = o != null ? o : [], l instanceof ie ? o = H(H([], N(o)), N(l.errors)) : o.push(l);
            }
          }
        } catch (l) {
          n = {error: l};
        } finally {
          try {
            m && !m.done && (i = d.return) && i.call(d);
          } finally {
            if (n)
              throw n.error;
          }
        }
      }
      if (o)
        throw new ie(o);
    }
  }, t.prototype.add = function(r) {
    var e;
    if (r && r !== this)
      if (this.closed)
        Te(r);
      else {
        if (r instanceof t) {
          if (r.closed || r._hasParent(this))
            return;
          r._addParent(this);
        }
        (this._finalizers = (e = this._finalizers) !== null && e !== void 0 ? e : []).push(r);
      }
  }, t.prototype._hasParent = function(r) {
    var e = this._parentage;
    return e === r || Array.isArray(e) && e.includes(r);
  }, t.prototype._addParent = function(r) {
    var e = this._parentage;
    this._parentage = Array.isArray(e) ? (e.push(r), e) : e ? [e, r] : r;
  }, t.prototype._removeParent = function(r) {
    var e = this._parentage;
    e === r ? this._parentage = null : Array.isArray(e) && fe(e, r);
  }, t.prototype.remove = function(r) {
    var e = this._finalizers;
    e && fe(e, r), r instanceof t && r._removeParent(this);
  }, t.EMPTY = function() {
    var r = new t();
    return r.closed = true, r;
  }(), t;
}(), Pe = Z.EMPTY;
function Re(t) {
  return t instanceof Z || t && "closed" in t && g(t.remove) && g(t.add) && g(t.unsubscribe);
}
function Te(t) {
  g(t) ? t() : t.unsubscribe();
}
var ge = {
  onUnhandledError: null,
  onStoppedNotification: null,
  Promise: void 0,
  useDeprecatedSynchronousErrorHandling: false,
  useDeprecatedNextContext: false
}, de = {
  setTimeout: function(t, r) {
    for (var e = [], n = 2; n < arguments.length; n++)
      e[n - 2] = arguments[n];
    var i = de.delegate;
    return i != null && i.setTimeout ? i.setTimeout.apply(i, H([t, r], N(e))) : setTimeout.apply(void 0, H([t, r], N(e)));
  },
  clearTimeout: function(t) {
    var r = de.delegate;
    return ((r == null ? void 0 : r.clearTimeout) || clearTimeout)(t);
  },
  delegate: void 0
};
function xe(t) {
  de.setTimeout(function() {
    throw t;
  });
}
function he() {
}
function z(t) {
  t();
}
var we = function(t) {
  Y(r, t);
  function r(e) {
    var n = t.call(this) || this;
    return n.isStopped = false, e ? (n.destination = e, Re(e) && e.add(n)) : n.destination = ze, n;
  }
  return r.create = function(e, n, i) {
    return new W(e, n, i);
  }, r.prototype.next = function(e) {
    this.isStopped || this._next(e);
  }, r.prototype.error = function(e) {
    this.isStopped || (this.isStopped = true, this._error(e));
  }, r.prototype.complete = function() {
    this.isStopped || (this.isStopped = true, this._complete());
  }, r.prototype.unsubscribe = function() {
    this.closed || (this.isStopped = true, t.prototype.unsubscribe.call(this), this.destination = null);
  }, r.prototype._next = function(e) {
    this.destination.next(e);
  }, r.prototype._error = function(e) {
    try {
      this.destination.error(e);
    } finally {
      this.unsubscribe();
    }
  }, r.prototype._complete = function() {
    try {
      this.destination.complete();
    } finally {
      this.unsubscribe();
    }
  }, r;
}(Z), Ge = Function.prototype.bind;
function se(t, r) {
  return Ge.call(t, r);
}
var Ve = function() {
  function t(r) {
    this.partialObserver = r;
  }
  return t.prototype.next = function(r) {
    var e = this.partialObserver;
    if (e.next)
      try {
        e.next(r);
      } catch (n) {
        J(n);
      }
  }, t.prototype.error = function(r) {
    var e = this.partialObserver;
    if (e.error)
      try {
        e.error(r);
      } catch (n) {
        J(n);
      }
    else
      J(r);
  }, t.prototype.complete = function() {
    var r = this.partialObserver;
    if (r.complete)
      try {
        r.complete();
      } catch (e) {
        J(e);
      }
  }, t;
}(), W = function(t) {
  Y(r, t);
  function r(e, n, i) {
    var o = t.call(this) || this, u;
    if (g(e) || !e)
      u = {
        next: e != null ? e : void 0,
        error: n != null ? n : void 0,
        complete: i != null ? i : void 0
      };
    else {
      var c;
      o && ge.useDeprecatedNextContext ? (c = Object.create(e), c.unsubscribe = function() {
        return o.unsubscribe();
      }, u = {
        next: e.next && se(e.next, c),
        error: e.error && se(e.error, c),
        complete: e.complete && se(e.complete, c)
      }) : u = e;
    }
    return o.destination = new Ve(u), o;
  }
  return r;
}(we);
function J(t) {
  xe(t);
}
function Je(t) {
  throw t;
}
var ze = {
  closed: true,
  next: he,
  error: Je,
  complete: he
}, _e = function() {
  return typeof Symbol == "function" && Symbol.observable || "@@observable";
}();
function Ee(t) {
  return t;
}
function Qe(t) {
  return t.length === 0 ? Ee : t.length === 1 ? t[0] : function(e) {
    return t.reduce(function(n, i) {
      return i(n);
    }, e);
  };
}
var S = function() {
  function t(r) {
    r && (this._subscribe = r);
  }
  return t.prototype.lift = function(r) {
    var e = new t();
    return e.source = this, e.operator = r, e;
  }, t.prototype.subscribe = function(r, e, n) {
    var i = this, o = et(r) ? r : new W(r, e, n);
    return z(function() {
      var u = i, c = u.operator, a = u.source;
      o.add(c ? c.call(o, a) : a ? i._subscribe(o) : i._trySubscribe(o));
    }), o;
  }, t.prototype._trySubscribe = function(r) {
    try {
      return this._subscribe(r);
    } catch (e) {
      r.error(e);
    }
  }, t.prototype.forEach = function(r, e) {
    var n = this;
    return e = Oe(e), new e(function(i, o) {
      var u = new W({
        next: function(c) {
          try {
            r(c);
          } catch (a) {
            o(a), u.unsubscribe();
          }
        },
        error: o,
        complete: i
      });
      n.subscribe(u);
    });
  }, t.prototype._subscribe = function(r) {
    var e;
    return (e = this.source) === null || e === void 0 ? void 0 : e.subscribe(r);
  }, t.prototype[_e] = function() {
    return this;
  }, t.prototype.pipe = function() {
    for (var r = [], e = 0; e < arguments.length; e++)
      r[e] = arguments[e];
    return Qe(r)(this);
  }, t.prototype.toPromise = function(r) {
    var e = this;
    return r = Oe(r), new r(function(n, i) {
      var o;
      e.subscribe(function(u) {
        return o = u;
      }, function(u) {
        return i(u);
      }, function() {
        return n(o);
      });
    });
  }, t.create = function(r) {
    return new t(r);
  }, t;
}();
function Oe(t) {
  var r;
  return (r = t != null ? t : ge.Promise) !== null && r !== void 0 ? r : Promise;
}
function Xe(t) {
  return t && g(t.next) && g(t.error) && g(t.complete);
}
function et(t) {
  return t && t instanceof we || Xe(t) && Re(t);
}
function tt(t) {
  return g(t == null ? void 0 : t.lift);
}
function O(t) {
  return function(r) {
    if (tt(r))
      return r.lift(function(e) {
        try {
          return t(e, this);
        } catch (n) {
          this.error(n);
        }
      });
    throw new TypeError("Unable to lift unknown Observable type");
  };
}
function L(t, r, e, n, i) {
  return new rt(t, r, e, n, i);
}
var rt = function(t) {
  Y(r, t);
  function r(e, n, i, o, u, c) {
    var a = t.call(this, e) || this;
    return a.onFinalize = u, a.shouldUnsubscribe = c, a._next = n ? function(s) {
      try {
        n(s);
      } catch (f) {
        e.error(f);
      }
    } : t.prototype._next, a._error = o ? function(s) {
      try {
        o(s);
      } catch (f) {
        e.error(f);
      } finally {
        this.unsubscribe();
      }
    } : t.prototype._error, a._complete = i ? function() {
      try {
        i();
      } catch (s) {
        e.error(s);
      } finally {
        this.unsubscribe();
      }
    } : t.prototype._complete, a;
  }
  return r.prototype.unsubscribe = function() {
    var e;
    if (!this.shouldUnsubscribe || this.shouldUnsubscribe()) {
      var n = this.closed;
      t.prototype.unsubscribe.call(this), !n && ((e = this.onFinalize) === null || e === void 0 || e.call(this));
    }
  }, r;
}(we), nt = me(function(t) {
  return function() {
    t(this), this.name = "ObjectUnsubscribedError", this.message = "object unsubscribed";
  };
}), R = function(t) {
  Y(r, t);
  function r() {
    var e = t.call(this) || this;
    return e.closed = false, e.currentObservers = null, e.observers = [], e.isStopped = false, e.hasError = false, e.thrownError = null, e;
  }
  return r.prototype.lift = function(e) {
    var n = new Ie(this, this);
    return n.operator = e, n;
  }, r.prototype._throwIfClosed = function() {
    if (this.closed)
      throw new nt();
  }, r.prototype.next = function(e) {
    var n = this;
    z(function() {
      var i, o;
      if (n._throwIfClosed(), !n.isStopped) {
        n.currentObservers || (n.currentObservers = Array.from(n.observers));
        try {
          for (var u = q(n.currentObservers), c = u.next(); !c.done; c = u.next()) {
            var a = c.value;
            a.next(e);
          }
        } catch (s) {
          i = {error: s};
        } finally {
          try {
            c && !c.done && (o = u.return) && o.call(u);
          } finally {
            if (i)
              throw i.error;
          }
        }
      }
    });
  }, r.prototype.error = function(e) {
    var n = this;
    z(function() {
      if (n._throwIfClosed(), !n.isStopped) {
        n.hasError = n.isStopped = true, n.thrownError = e;
        for (var i = n.observers; i.length; )
          i.shift().error(e);
      }
    });
  }, r.prototype.complete = function() {
    var e = this;
    z(function() {
      if (e._throwIfClosed(), !e.isStopped) {
        e.isStopped = true;
        for (var n = e.observers; n.length; )
          n.shift().complete();
      }
    });
  }, r.prototype.unsubscribe = function() {
    this.isStopped = this.closed = true, this.observers = this.currentObservers = null;
  }, Object.defineProperty(r.prototype, "observed", {
    get: function() {
      var e;
      return ((e = this.observers) === null || e === void 0 ? void 0 : e.length) > 0;
    },
    enumerable: false,
    configurable: true
  }), r.prototype._trySubscribe = function(e) {
    return this._throwIfClosed(), t.prototype._trySubscribe.call(this, e);
  }, r.prototype._subscribe = function(e) {
    return this._throwIfClosed(), this._checkFinalizedStatuses(e), this._innerSubscribe(e);
  }, r.prototype._innerSubscribe = function(e) {
    var n = this, i = this, o = i.hasError, u = i.isStopped, c = i.observers;
    return o || u ? Pe : (this.currentObservers = null, c.push(e), new Z(function() {
      n.currentObservers = null, fe(c, e);
    }));
  }, r.prototype._checkFinalizedStatuses = function(e) {
    var n = this, i = n.hasError, o = n.thrownError, u = n.isStopped;
    i ? e.error(o) : u && e.complete();
  }, r.prototype.asObservable = function() {
    var e = new S();
    return e.source = this, e;
  }, r.create = function(e, n) {
    return new Ie(e, n);
  }, r;
}(S), Ie = function(t) {
  Y(r, t);
  function r(e, n) {
    var i = t.call(this) || this;
    return i.destination = e, i.source = n, i;
  }
  return r.prototype.next = function(e) {
    var n, i;
    (i = (n = this.destination) === null || n === void 0 ? void 0 : n.next) === null || i === void 0 || i.call(n, e);
  }, r.prototype.error = function(e) {
    var n, i;
    (i = (n = this.destination) === null || n === void 0 ? void 0 : n.error) === null || i === void 0 || i.call(n, e);
  }, r.prototype.complete = function() {
    var e, n;
    (n = (e = this.destination) === null || e === void 0 ? void 0 : e.complete) === null || n === void 0 || n.call(e);
  }, r.prototype._subscribe = function(e) {
    var n, i;
    return (i = (n = this.source) === null || n === void 0 ? void 0 : n.subscribe(e)) !== null && i !== void 0 ? i : Pe;
  }, r;
}(R), ot = new S(function(t) {
  return t.complete();
}), it = function(t) {
  return t && typeof t.length == "number" && typeof t != "function";
};
function st(t) {
  return g(t == null ? void 0 : t.then);
}
function ut(t) {
  return g(t[_e]);
}
function ct(t) {
  return Symbol.asyncIterator && g(t == null ? void 0 : t[Symbol.asyncIterator]);
}
function at(t) {
  return new TypeError("You provided " + (t !== null && typeof t == "object" ? "an invalid object" : "'" + t + "'") + " where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.");
}
function lt() {
  return typeof Symbol != "function" || !Symbol.iterator ? "@@iterator" : Symbol.iterator;
}
var ft = lt();
function dt(t) {
  return g(t == null ? void 0 : t[ft]);
}
function ht(t) {
  return Ze(this, arguments, function() {
    var e, n, i, o;
    return Fe(this, function(u) {
      switch (u.label) {
        case 0:
          e = t.getReader(), u.label = 1;
        case 1:
          u.trys.push([1, , 9, 10]), u.label = 2;
        case 2:
          return [4, D(e.read())];
        case 3:
          return n = u.sent(), i = n.value, o = n.done, o ? [4, D(void 0)] : [3, 5];
        case 4:
          return [2, u.sent()];
        case 5:
          return [4, D(i)];
        case 6:
          return [4, u.sent()];
        case 7:
          return u.sent(), [3, 2];
        case 8:
          return [3, 10];
        case 9:
          return e.releaseLock(), [7];
        case 10:
          return [2];
      }
    });
  });
}
function pt(t) {
  return g(t == null ? void 0 : t.getReader);
}
function Ce(t) {
  if (t instanceof S)
    return t;
  if (t != null) {
    if (ut(t))
      return vt(t);
    if (it(t))
      return yt(t);
    if (st(t))
      return bt(t);
    if (ct(t))
      return ke(t);
    if (dt(t))
      return mt(t);
    if (pt(t))
      return gt(t);
  }
  throw at(t);
}
function vt(t) {
  return new S(function(r) {
    var e = t[_e]();
    if (g(e.subscribe))
      return e.subscribe(r);
    throw new TypeError("Provided object does not correctly implement Symbol.observable");
  });
}
function yt(t) {
  return new S(function(r) {
    for (var e = 0; e < t.length && !r.closed; e++)
      r.next(t[e]);
    r.complete();
  });
}
function bt(t) {
  return new S(function(r) {
    t.then(function(e) {
      r.closed || (r.next(e), r.complete());
    }, function(e) {
      return r.error(e);
    }).then(null, xe);
  });
}
function mt(t) {
  return new S(function(r) {
    var e, n;
    try {
      for (var i = q(t), o = i.next(); !o.done; o = i.next()) {
        var u = o.value;
        if (r.next(u), r.closed)
          return;
      }
    } catch (c) {
      e = {error: c};
    } finally {
      try {
        o && !o.done && (n = i.return) && n.call(i);
      } finally {
        if (e)
          throw e.error;
      }
    }
    r.complete();
  });
}
function ke(t) {
  return new S(function(r) {
    wt(t, r).catch(function(e) {
      return r.error(e);
    });
  });
}
function gt(t) {
  return ke(ht(t));
}
function wt(t, r) {
  var e, n, i, o;
  return Ye(this, void 0, void 0, function() {
    var u, c;
    return Fe(this, function(a) {
      switch (a.label) {
        case 0:
          a.trys.push([0, 5, 6, 11]), e = $e(t), a.label = 1;
        case 1:
          return [4, e.next()];
        case 2:
          if (n = a.sent(), !!n.done)
            return [3, 4];
          if (u = n.value, r.next(u), r.closed)
            return [2];
          a.label = 3;
        case 3:
          return [3, 1];
        case 4:
          return [3, 11];
        case 5:
          return c = a.sent(), i = {error: c}, [3, 11];
        case 6:
          return a.trys.push([6, , 9, 10]), n && !n.done && (o = e.return) ? [4, o.call(e)] : [3, 8];
        case 7:
          a.sent(), a.label = 8;
        case 8:
          return [3, 10];
        case 9:
          if (i)
            throw i.error;
          return [7];
        case 10:
          return [7];
        case 11:
          return r.complete(), [2];
      }
    });
  });
}
function _t(t) {
  return !!t && (t instanceof S || g(t.lift) && g(t.subscribe));
}
var Se = me(function(t) {
  return function() {
    t(this), this.name = "EmptyError", this.message = "no elements in sequence";
  };
});
function Et(t, r) {
  var e = typeof r == "object";
  return new Promise(function(n, i) {
    var o = new W({
      next: function(u) {
        n(u), o.unsubscribe();
      },
      error: i,
      complete: function() {
        e ? n(r.defaultValue) : i(new Se());
      }
    });
    t.subscribe(o);
  });
}
function $(t, r) {
  return O(function(e, n) {
    var i = 0;
    e.subscribe(L(n, function(o) {
      n.next(t.call(r, o, i++));
    }));
  });
}
function Ae(t, r) {
  return O(function(e, n) {
    var i = 0;
    e.subscribe(L(n, function(o) {
      return t.call(r, o, i++) && n.next(o);
    }));
  });
}
function St(t) {
  return O(function(r, e) {
    var n = false;
    r.subscribe(L(e, function(i) {
      n = true, e.next(i);
    }, function() {
      n || e.next(t), e.complete();
    }));
  });
}
function At(t) {
  return t <= 0 ? function() {
    return ot;
  } : O(function(r, e) {
    var n = 0;
    r.subscribe(L(e, function(i) {
      ++n <= t && (e.next(i), t <= n && e.complete());
    }));
  });
}
function Tt(t) {
  return t === void 0 && (t = Ot), O(function(r, e) {
    var n = false;
    r.subscribe(L(e, function(i) {
      n = true, e.next(i);
    }, function() {
      return n ? e.complete() : e.error(t());
    }));
  });
}
function Ot() {
  return new Se();
}
function It(t, r) {
  var e = arguments.length >= 2;
  return function(n) {
    return n.pipe(t ? Ae(function(i, o) {
      return t(i, o, n);
    }) : Ee, At(1), e ? St(r) : Tt(function() {
      return new Se();
    }));
  };
}
function Ft(t) {
  t === void 0 && (t = {});
  var r = t.connector, e = r === void 0 ? function() {
    return new R();
  } : r, n = t.resetOnError, i = n === void 0 ? true : n, o = t.resetOnComplete, u = o === void 0 ? true : o, c = t.resetOnRefCountZero, a = c === void 0 ? true : c;
  return function(s) {
    var f, y, d, m = 0, _ = false, l = false, v = function() {
      y == null || y.unsubscribe(), y = void 0;
    }, b = function() {
      v(), f = d = void 0, _ = l = false;
    }, p = function() {
      var A = f;
      b(), A == null || A.unsubscribe();
    };
    return O(function(A, w) {
      m++, !l && !_ && v();
      var U = d = d != null ? d : e();
      w.add(function() {
        m--, m === 0 && !l && !_ && (y = ue(p, a));
      }), U.subscribe(w), !f && m > 0 && (f = new W({
        next: function(I) {
          return U.next(I);
        },
        error: function(I) {
          l = true, v(), y = ue(b, i, I), U.error(I);
        },
        complete: function() {
          _ = true, v(), y = ue(b, u), U.complete();
        }
      }), Ce(A).subscribe(f));
    })(s);
  };
}
function ue(t, r) {
  for (var e = [], n = 2; n < arguments.length; n++)
    e[n - 2] = arguments[n];
  if (r === true) {
    t();
    return;
  }
  if (r !== false) {
    var i = new W({
      next: function() {
        i.unsubscribe(), t();
      }
    });
    return r.apply(void 0, H([], N(e))).subscribe(i);
  }
}
function Pt(t) {
  return O(function(r, e) {
    Ce(t).subscribe(L(e, function() {
      return e.complete();
    }, he)), !e.closed && r.subscribe(e);
  });
}
function K(t, r, e) {
  var n = g(t) || r || e ? {next: t, error: r, complete: e} : t;
  return n ? O(function(i, o) {
    var u;
    (u = n.subscribe) === null || u === void 0 || u.call(n);
    var c = true;
    i.subscribe(L(o, function(a) {
      var s;
      (s = n.next) === null || s === void 0 || s.call(n, a), o.next(a);
    }, function() {
      var a;
      c = false, (a = n.complete) === null || a === void 0 || a.call(n), o.complete();
    }, function(a) {
      var s;
      c = false, (s = n.error) === null || s === void 0 || s.call(n, a), o.error(a);
    }, function() {
      var a, s;
      c && ((a = n.unsubscribe) === null || a === void 0 || a.call(n)), (s = n.finalize) === null || s === void 0 || s.call(n);
    }));
  }) : Ee;
}
const Rt = () => ({
  outgoingMessageSubject: new R(),
  incomingMessageSubject: new R(),
  responseSubject: new R(),
  messageLifeCycleEventSubject: new R(),
  dispatchEventSubject: new R()
});
var xt = typeof globalThis < "u" ? globalThis : typeof window < "u" ? window : typeof global < "u" ? global : typeof self < "u" ? self : {}, Le = {exports: {}};
(function(t) {
  (function(r, e) {
    t.exports ? t.exports = e() : r.log = e();
  })(xt, function() {
    var r = function() {
    }, e = "undefined", n = typeof window !== e && typeof window.navigator !== e && /Trident\/|MSIE /.test(window.navigator.userAgent), i = [
      "trace",
      "debug",
      "info",
      "warn",
      "error"
    ];
    function o(l, v) {
      var b = l[v];
      if (typeof b.bind == "function")
        return b.bind(l);
      try {
        return Function.prototype.bind.call(b, l);
      } catch {
        return function() {
          return Function.prototype.apply.apply(b, [l, arguments]);
        };
      }
    }
    function u() {
      console.log && (console.log.apply ? console.log.apply(console, arguments) : Function.prototype.apply.apply(console.log, [console, arguments])), console.trace && console.trace();
    }
    function c(l) {
      return l === "debug" && (l = "log"), typeof console === e ? false : l === "trace" && n ? u : console[l] !== void 0 ? o(console, l) : console.log !== void 0 ? o(console, "log") : r;
    }
    function a(l, v) {
      for (var b = 0; b < i.length; b++) {
        var p = i[b];
        this[p] = b < l ? r : this.methodFactory(p, l, v);
      }
      this.log = this.debug;
    }
    function s(l, v, b) {
      return function() {
        typeof console !== e && (a.call(this, v, b), this[l].apply(this, arguments));
      };
    }
    function f(l, v, b) {
      return c(l) || s.apply(this, arguments);
    }
    function y(l, v, b) {
      var p = this, A;
      v = v == null ? "WARN" : v;
      var w = "loglevel";
      typeof l == "string" ? w += ":" + l : typeof l == "symbol" && (w = void 0);
      function U(h) {
        var F = (i[h] || "silent").toUpperCase();
        if (!(typeof window === e || !w)) {
          try {
            window.localStorage[w] = F;
            return;
          } catch {
          }
          try {
            window.document.cookie = encodeURIComponent(w) + "=" + F + ";";
          } catch {
          }
        }
      }
      function I() {
        var h;
        if (!(typeof window === e || !w)) {
          try {
            h = window.localStorage[w];
          } catch {
          }
          if (typeof h === e)
            try {
              var F = window.document.cookie, G = F.indexOf(encodeURIComponent(w) + "=");
              G !== -1 && (h = /^([^;]+)/.exec(F.slice(G))[1]);
            } catch {
            }
          return p.levels[h] === void 0 && (h = void 0), h;
        }
      }
      function We() {
        if (!(typeof window === e || !w)) {
          try {
            window.localStorage.removeItem(w);
            return;
          } catch {
          }
          try {
            window.document.cookie = encodeURIComponent(w) + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC";
          } catch {
          }
        }
      }
      p.name = l, p.levels = {
        TRACE: 0,
        DEBUG: 1,
        INFO: 2,
        WARN: 3,
        ERROR: 4,
        SILENT: 5
      }, p.methodFactory = b || f, p.getLevel = function() {
        return A;
      }, p.setLevel = function(h, F) {
        if (typeof h == "string" && p.levels[h.toUpperCase()] !== void 0 && (h = p.levels[h.toUpperCase()]), typeof h == "number" && h >= 0 && h <= p.levels.SILENT) {
          if (A = h, F !== false && U(h), a.call(p, h, l), typeof console === e && h < p.levels.SILENT)
            return "No console available for logging";
        } else
          throw "log.setLevel() called with invalid level: " + h;
      }, p.setDefaultLevel = function(h) {
        v = h, I() || p.setLevel(h, false);
      }, p.resetLevel = function() {
        p.setLevel(v, false), We();
      }, p.enableAll = function(h) {
        p.setLevel(p.levels.TRACE, h);
      }, p.disableAll = function(h) {
        p.setLevel(p.levels.SILENT, h);
      };
      var oe = I();
      oe == null && (oe = v), p.setLevel(oe, false);
    }
    var d = new y(), m = {};
    d.getLogger = function(v) {
      if (typeof v != "symbol" && typeof v != "string" || v === "")
        throw new TypeError("You must supply a name when creating a logger.");
      var b = m[v];
      return b || (b = m[v] = new y(v, d.getLevel(), d.methodFactory)), b;
    };
    var _ = typeof window !== e ? window.log : void 0;
    return d.noConflict = function() {
      return typeof window !== e && window.log === d && (window.log = _), d;
    }, d.getLoggers = function() {
      return m;
    }, d.default = d, d;
  });
})(Le);
const k = Le.exports, j = {
  missingAddress: "missingAddress",
  rejectedByUser: "rejectedByUser",
  missingExtension: "missingExtension",
  unavailable: "unavailable",
  internal: "internal",
  submitTransaction: "submitTransaction"
}, Ct = {
  [j.internal]: "unknown error",
  [j.missingAddress]: "account address could not be found",
  [j.missingExtension]: "extension could not be found",
  [j.rejectedByUser]: "user rejected request",
  [j.submitTransaction]: "could not submit transaction to the network",
  [j.unavailable]: "connection could not be established at this time"
}, Q = (t, r, e) => ({
  error: t,
  requestId: r,
  message: e || Ct[t]
});
var pe = /* @__PURE__ */ ((t) => (t.GetAccountAddress = "getAccountAddress", t.GetAccountAddressSuccess = "getAccountAddressSuccess", t.GetAccountAddressFailure = "getAccountAddressFailure", t.SignTransaction = "signTransaction", t.SignTransactionSuccess = "signTransactionSuccess", t.SignTransactionFailure = "signTransactionFailure", t))(pe || {}), ve = /* @__PURE__ */ ((t) => (t[t.Extension = 0] = "Extension", t[t.Dapp = 1] = "Dapp", t))(ve || {});
const X = {
  accountAddresses: "accountAddresses"
};
function ce(t, r, e, n) {
  function i(o) {
    return o instanceof e ? o : new e(function(u) {
      u(o);
    });
  }
  return new (e || (e = Promise))(function(o, u) {
    function c(f) {
      try {
        s(n.next(f));
      } catch (y) {
        u(y);
      }
    }
    function a(f) {
      try {
        s(n.throw(f));
      } catch (y) {
        u(y);
      }
    }
    function s(f) {
      f.done ? o(f.value) : i(f.value).then(c, a);
    }
    s((n = n.apply(t, r || [])).next());
  });
}
function ae(t, r) {
  var e = {label: 0, sent: function() {
    if (o[0] & 1)
      throw o[1];
    return o[1];
  }, trys: [], ops: []}, n, i, o, u;
  return u = {next: c(0), throw: c(1), return: c(2)}, typeof Symbol == "function" && (u[Symbol.iterator] = function() {
    return this;
  }), u;
  function c(s) {
    return function(f) {
      return a([s, f]);
    };
  }
  function a(s) {
    if (n)
      throw new TypeError("Generator is already executing.");
    for (; e; )
      try {
        if (n = 1, i && (o = s[0] & 2 ? i.return : s[0] ? i.throw || ((o = i.return) && o.call(i), 0) : i.next) && !(o = o.call(i, s[1])).done)
          return o;
        switch (i = 0, o && (s = [s[0] & 2, o.value]), s[0]) {
          case 0:
          case 1:
            o = s;
            break;
          case 4:
            return e.label++, {value: s[1], done: false};
          case 5:
            e.label++, i = s[1], s = [0];
            continue;
          case 7:
            s = e.ops.pop(), e.trys.pop();
            continue;
          default:
            if (o = e.trys, !(o = o.length > 0 && o[o.length - 1]) && (s[0] === 6 || s[0] === 2)) {
              e = 0;
              continue;
            }
            if (s[0] === 3 && (!o || s[1] > o[0] && s[1] < o[3])) {
              e.label = s[1];
              break;
            }
            if (s[0] === 6 && e.label < o[1]) {
              e.label = o[1], o = s;
              break;
            }
            if (o && e.label < o[2]) {
              e.label = o[2], e.ops.push(s);
              break;
            }
            o[2] && e.ops.pop(), e.trys.pop();
            continue;
        }
        s = r.call(t, e);
      } catch (f) {
        s = [6, f], i = 0;
      } finally {
        n = o = 0;
      }
    if (s[0] & 5)
      throw s[1];
    return {value: s[0] ? s[1] : void 0, done: true};
  }
}
function ee(t, r) {
  var e = typeof Symbol == "function" && t[Symbol.iterator];
  if (!e)
    return t;
  var n = e.call(t), i, o = [], u;
  try {
    for (; (r === void 0 || r-- > 0) && !(i = n.next()).done; )
      o.push(i.value);
  } catch (c) {
    u = {error: c};
  } finally {
    try {
      i && !i.done && (e = n.return) && e.call(n);
    } finally {
      if (u)
        throw u.error;
    }
  }
  return o;
}
function C(t, r, e) {
  if (e || arguments.length === 2)
    for (var n = 0, i = r.length, o; n < i; n++)
      (o || !(n in r)) && (o || (o = Array.prototype.slice.call(r, 0, n)), o[n] = r[n]);
  return t.concat(o || Array.prototype.slice.call(r));
}
var M = function() {
  function t(r) {
    this._promise = r;
  }
  return t.fromSafePromise = function(r) {
    var e = r.then(function(n) {
      return new P(n);
    });
    return new t(e);
  }, t.fromPromise = function(r, e) {
    var n = r.then(function(i) {
      return new P(i);
    }).catch(function(i) {
      return new x(e(i));
    });
    return new t(n);
  }, t.combine = function(r) {
    return Lt(r);
  }, t.combineWithAllErrors = function(r) {
    return Mt(r);
  }, t.prototype.map = function(r) {
    var e = this;
    return new t(this._promise.then(function(n) {
      return ce(e, void 0, void 0, function() {
        var i;
        return ae(this, function(o) {
          switch (o.label) {
            case 0:
              return n.isErr() ? [2, new x(n.error)] : (i = P.bind, [4, r(n.value)]);
            case 1:
              return [2, new (i.apply(P, [void 0, o.sent()]))()];
          }
        });
      });
    }));
  }, t.prototype.mapErr = function(r) {
    var e = this;
    return new t(this._promise.then(function(n) {
      return ce(e, void 0, void 0, function() {
        var i;
        return ae(this, function(o) {
          switch (o.label) {
            case 0:
              return n.isOk() ? [2, new P(n.value)] : (i = x.bind, [4, r(n.error)]);
            case 1:
              return [2, new (i.apply(x, [void 0, o.sent()]))()];
          }
        });
      });
    }));
  }, t.prototype.andThen = function(r) {
    return new t(this._promise.then(function(e) {
      if (e.isErr())
        return new x(e.error);
      var n = r(e.value);
      return n instanceof t ? n._promise : n;
    }));
  }, t.prototype.orElse = function(r) {
    var e = this;
    return new t(this._promise.then(function(n) {
      return ce(e, void 0, void 0, function() {
        return ae(this, function(i) {
          return n.isErr() ? [2, r(n.error)] : [2, new P(n.value)];
        });
      });
    }));
  }, t.prototype.match = function(r, e) {
    return this._promise.then(function(n) {
      return n.match(r, e);
    });
  }, t.prototype.unwrapOr = function(r) {
    return this._promise.then(function(e) {
      return e.unwrapOr(r);
    });
  }, t.prototype.then = function(r, e) {
    return this._promise.then(r, e);
  }, t;
}(), te = function(t) {
  return new M(Promise.resolve(new x(t)));
};
var kt = function(t) {
  return function(r) {
    return C(C([], ee(r), false), [t], false);
  };
}, Me = function(t) {
  return t.reduce(function(r, e) {
    return r.isOk() ? e.isErr() ? T(e.error) : r.map(kt(e.value)) : r;
  }, E([]));
}, Lt = function(t) {
  return M.fromSafePromise(Promise.all(t)).andThen(Me);
}, Ue = function(t) {
  return t.reduce(function(r, e) {
    return e.isErr() ? r.isErr() ? T(C(C([], ee(r.error), false), [e.error], false)) : T([e.error]) : r.isErr() ? r : E(C(C([], ee(r.value), false), [e.value], false));
  }, E([]));
}, Mt = function(t) {
  return M.fromSafePromise(Promise.all(t)).andThen(Ue);
}, Ut = {
  withStackTrace: false
}, Be = function(t, r, e) {
  e === void 0 && (e = Ut);
  var n = r.isOk() ? {type: "Ok", value: r.value} : {type: "Err", value: r.error}, i = e.withStackTrace ? new Error().stack : void 0;
  return {
    data: n,
    message: t,
    stack: i
  };
}, ye;
(function(t) {
  function r(i, o) {
    return function() {
      for (var u = [], c = 0; c < arguments.length; c++)
        u[c] = arguments[c];
      try {
        var a = i.apply(void 0, C([], ee(u), false));
        return E(a);
      } catch (s) {
        return T(o ? o(s) : s);
      }
    };
  }
  t.fromThrowable = r;
  function e(i) {
    return Me(i);
  }
  t.combine = e;
  function n(i) {
    return Ue(i);
  }
  t.combineWithAllErrors = n;
})(ye || (ye = {}));
var E = function(t) {
  return new P(t);
}, T = function(t) {
  return new x(t);
}, P = function() {
  function t(r) {
    this.value = r;
  }
  return t.prototype.isOk = function() {
    return true;
  }, t.prototype.isErr = function() {
    return !this.isOk();
  }, t.prototype.map = function(r) {
    return E(r(this.value));
  }, t.prototype.mapErr = function(r) {
    return E(this.value);
  }, t.prototype.andThen = function(r) {
    return r(this.value);
  }, t.prototype.orElse = function(r) {
    return E(this.value);
  }, t.prototype.asyncAndThen = function(r) {
    return r(this.value);
  }, t.prototype.asyncMap = function(r) {
    return M.fromSafePromise(r(this.value));
  }, t.prototype.unwrapOr = function(r) {
    return this.value;
  }, t.prototype.match = function(r, e) {
    return r(this.value);
  }, t.prototype._unsafeUnwrap = function(r) {
    return this.value;
  }, t.prototype._unsafeUnwrapErr = function(r) {
    throw Be("Called `_unsafeUnwrapErr` on an Ok", this, r);
  }, t;
}(), x = function() {
  function t(r) {
    this.error = r;
  }
  return t.prototype.isOk = function() {
    return false;
  }, t.prototype.isErr = function() {
    return !this.isOk();
  }, t.prototype.map = function(r) {
    return T(this.error);
  }, t.prototype.mapErr = function(r) {
    return T(r(this.error));
  }, t.prototype.andThen = function(r) {
    return T(this.error);
  }, t.prototype.orElse = function(r) {
    return r(this.error);
  }, t.prototype.asyncAndThen = function(r) {
    return te(this.error);
  }, t.prototype.asyncMap = function(r) {
    return te(this.error);
  }, t.prototype.unwrapOr = function(r) {
    return r;
  }, t.prototype.match = function(r, e) {
    return e(this.error);
  }, t.prototype._unsafeUnwrap = function(r) {
    throw Be("Called `_unsafeUnwrap` on an Err", this, r);
  }, t.prototype._unsafeUnwrapErr = function(r) {
    return this.error;
  }, t;
}();
ye.fromThrowable;
const Bt = (t, r) => t.messageLifeCycleEventSubject.pipe(Ae((e) => e.requestId === r)), je = (t, r, e) => {
  t.outgoingMessageSubject.next(r);
  const n = t.responseSubject.pipe(Ae((o) => o.requestId === r.requestId), $((o) => "method" in o ? E(o.payload) : T(o)), It()), i = Bt(t, r.requestId).pipe(K((o) => {
    k.debug(`💬📣⬇️ received message lifecycle event
${JSON.stringify(o)}`), e && e(o.eventType);
  }), Pt(n)).subscribe();
  return n.pipe(K(() => {
    i.unsubscribe();
  }));
}, jt = (t) => t.dispatchEventSubject.pipe($(qe.transformOutgoingMessage), K(({event: r, payload: e}) => {
  k.debug(`🔵💬⬆️ message sent
${JSON.stringify(e)}`), window.dispatchEvent(new CustomEvent(r, {
    detail: e
  }));
})), De = (t, r = crypto.randomUUID()) => E({
  ...t,
  requestId: r
}).map((e) => (k.debug(`🔵💬💫 message created
${JSON.stringify(e)}`), e)), be = {
  outgoingMessage: "radix#chromeExtension#send",
  incomingMessage: "radix#chromeExtension#receive"
}, Dt = (t) => {
  const r = (n) => {
    const i = n.detail;
    t.incomingMessageSubject.next(i);
  };
  return addEventListener(be.incomingMessage, r), {destroy: () => {
    removeEventListener(be.incomingMessage, r);
  }};
}, re = {
  request: "request",
  sendTransaction: "sendTransaction"
}, qt = (t) => E(Object.entries(t).map(([r, e]) => ({requestType: r, ...e})).filter((r) => Object.values(X).includes(r.requestType))), Wt = (t) => qt(t).andThen((r) => De({
  method: re.request,
  payload: r
})), Nt = (t) => t.map((r) => r.reduce((e, n) => {
  switch (n.requestType) {
    case X.accountAddresses:
      return {
        ...e,
        [X.accountAddresses]: n.addresses
      };
    default:
      return e;
  }
}, {})), Ht = (t) => t, ne = (t) => _t(t) ? M.fromPromise(Et(t), Ht).andThen((r) => r) : t, Kt = (t) => (r) => {
  const e = Wt(r);
  if (e.isErr())
    return ne(te(Q("internal", "", "could not construct outgoing message")));
  const n = e.value, i = je(t, n).pipe($(Nt));
  return ne(i);
}, Yt = (t) => (r, e = []) => {
  const n = De({
    method: re.sendTransaction,
    payload: {transactionManifest: r, blobs: e}
  });
  if (n.isErr())
    return k.error(n.error), ne(te(Q("internal", "", "could not construct outgoing message")));
  const i = je(t, n.value);
  return ne(i);
}, qe = {
  transformIncomingMessage: (t) => {
    if (!("action" in t))
      return t;
    switch (t.action.type) {
      case "getAccountAddressSuccess":
        return {
          method: "request",
          requestId: t.action.id,
          payload: [
            {
              requestType: X.accountAddresses,
              addresses: [
                {address: t.action.payload, label: "active account"}
              ]
            }
          ]
        };
      case "getAccountAddressFailure":
        return Q("missingAddress", t.action.id);
      case "signTransactionSuccess":
        return {
          method: "sendTransaction",
          requestId: t.action.id,
          payload: t.action.payload
        };
      case "signTransactionFailure":
        return Q("submitTransaction", t.action.id);
      default:
        throw new Error("unhandled alpha wallet message");
    }
  },
  transformOutgoingMessage: (t) => {
    switch (t.payload.method) {
      case re.request:
        return {
          event: t.event,
          payload: {
            action: {
              type: pe.GetAccountAddress,
              payload: "",
              id: t.payload.requestId
            },
            target: ve.Extension
          }
        };
      case re.sendTransaction:
        return {
          event: t.event,
          payload: {
            action: {
              type: pe.SignTransaction,
              payload: t.payload.payload,
              id: t.payload.requestId
            },
            target: ve.Extension
          }
        };
      default:
        return t.payload;
    }
  }
}, Zt = (t) => t.outgoingMessageSubject.pipe($((r) => ({
  event: be.outgoingMessage,
  payload: r
})), K((r) => {
  t.dispatchEventSubject.next(r);
}), Ft()), $t = (t) => t.incomingMessageSubject.pipe($(qe.transformIncomingMessage), K((r) => {
  k.debug(`🔵💬⬇️ message received
${JSON.stringify(r)}`), "eventType" in r ? t.messageLifeCycleEventSubject.next(r) : t.responseSubject.next(r);
})), Gt = (t) => {
  const r = new Z();
  return r.add(jt(t).subscribe()), r.add($t(t).subscribe()), r.add(Zt(t).subscribe()), r;
}, Vt = (t = Rt()) => {
  const r = Gt(t), e = Dt(t);
  return {destroy: () => {
    e.destroy(), r.unsubscribe();
  }, subjects: t};
};
class Jt {
  constructor(r) {
    B(this, "instructions");
    this.instructions = r;
  }
  toString() {
    return this.instructions.join(`
`);
  }
}
class Qt {
  constructor() {
    B(this, "instructions");
    B(this, "buckets");
    B(this, "proofs");
    B(this, "id_allocator");
    this.instructions = [], this.buckets = /* @__PURE__ */ new Map(), this.proofs = /* @__PURE__ */ new Map(), this.id_allocator = 512;
  }
  takeFromWorktop(r, e) {
    return this.instructions.push('TAKE_FROM_WORKTOP ResourceAddress("' + r + '") Bucket("' + e + '");'), this.buckets.set(e, this.id_allocator++), this;
  }
  takeFromWorktopByAmount(r, e, n) {
    return this.instructions.push('TAKE_FROM_WORKTOP_BY_AMOUNT Decimal("' + r + '") ResourceAddress("' + e + '") Bucket("' + n + '");'), this.buckets.set(n, this.id_allocator++), this;
  }
  takeFromWorktopByIds(r, e, n) {
    return this.instructions.push("TAKE_FROM_WORKTOP_BY_IDS " + this.formatNonFungibleIds(r) + ' ResourceAddress("' + e + '") Bucket("' + n + '");'), this.buckets.set(n, this.id_allocator++), this;
  }
  returnToWorktop(r) {
    return this.instructions.push('RETURN_TO_WORKTOP Bucket("' + r + '");'), this;
  }
  assertWorktopContains(r) {
    return this.instructions.push('ASSERT_WORKTOP_CONTAINS ResourceAddress("' + r + '");'), this;
  }
  assertWorktopContainsByAmount(r, e) {
    return this.instructions.push('ASSERT_WORKTOP_CONTAINS_BY_AMOUNT Decimal("' + r + '") ResourceAddress("' + e + '");'), this;
  }
  assertWorktopContainsByIds(r, e) {
    return this.instructions.push("ASSERT_WORKTOP_CONTAINS_BY_IDS " + this.formatNonFungibleIds(r) + ' ResourceAddress("' + e + '");'), this;
  }
  popFromAuthZone(r) {
    return this.instructions.push('POP_FROM_AUTH_ZONE Proof("' + r + '");'), this.proofs.set(r, this.id_allocator++), this;
  }
  pushToAuthZone(r) {
    return this.instructions.push('PUSH_TO_AUTH_ZONE Proof("' + r + '");'), this;
  }
  clearAuthZone() {
    return this.instructions.push("CLEAR_AUTH_ZONE;"), this;
  }
  createProofFromAuthZone(r, e) {
    return this.instructions.push('CREATE_PROOF_FROM_AUTH_ZONE ResourceAddress("' + r + '") Proof("' + e + '");'), this.proofs.set(e, this.id_allocator++), this;
  }
  createProofFromAuthZoneByAmount(r, e, n) {
    return this.instructions.push('CREATE_PROOF_FROM_AUTH_ZONE_BY_AMOUNT Decimal("' + r + '") ResourceAddress("' + e + '") Proof("' + n + '");'), this.proofs.set(n, this.id_allocator++), this;
  }
  createProofFromAuthZoneByIds(r, e, n) {
    return this.instructions.push("CREATE_PROOF_FROM_AUTH_ZONE_BY_IDS " + this.formatNonFungibleIds(r) + ' ResourceAddress("' + e + '") Proof("' + n + '");'), this.proofs.set(n, this.id_allocator++), this;
  }
  createProofFromBucket(r, e) {
    return this.instructions.push('CREATE_PROOF_FROM_BUCKET Bucket("' + r + '") Proof("' + e + '");'), this.proofs.set(e, this.id_allocator++), this;
  }
  cloneProof(r, e) {
    return this.instructions.push('CLONE_PROOF Proof("' + r + '") Proof("' + e + '");'), this.proofs.set(e, this.id_allocator++), this;
  }
  dropProof(r) {
    return this.instructions.push('DROP_PROOF Proof("' + r + '");'), this;
  }
  callFunction(r, e, n, i) {
    return this.instructions.push('CALL_FUNCTION PackageAddress("' + r + '") "' + e + '" "' + n + '" ' + i.join(" ") + ";"), this;
  }
  callMethod(r, e, n) {
    return this.instructions.push('CALL_METHOD ComponentAddress("' + r + '") "' + e + '" ' + n.join(" ") + ";"), this;
  }
  publishPackage(r, e) {
    return this.instructions.push('PUBLISH_PACKAGE Blob("' + r + '")  Blob("' + e + '");'), this;
  }
  withdrawFromAccount(r, e) {
    return this.instructions.push('CALL_METHOD ComponentAddress("' + r + '") "withdraw" ResourceAddress("' + e + '");'), this;
  }
  withdrawFromAccountByAmount(r, e, n) {
    return this.instructions.push('CALL_METHOD ComponentAddress("' + r + '") "withdraw_by_amount" Decimal("' + e + '") ResourceAddress("' + n + '");'), this;
  }
  withdrawFromAccountByIds(r, e, n) {
    return this.instructions.push('CALL_METHOD ComponentAddress("' + r + '") "withdraw_by_ids" ' + this.formatNonFungibleIds(e) + ' ResourceAddress("' + n + '");'), this;
  }
  createProofFromAccount(r, e) {
    return this.instructions.push('CALL_METHOD ComponentAddress("' + r + '") "create_proof" ResourceAddress("' + e + '");'), this;
  }
  createProofFromAccountByAmount(r, e, n) {
    return this.instructions.push('CALL_METHOD ComponentAddress("' + r + '") "create_proof_by_amount" Decimal("' + e + '") ResourceAddress("' + n + '");'), this;
  }
  createProofFromAccountByIds(r, e, n) {
    return this.instructions.push('CALL_METHOD ComponentAddress("' + r + '") "create_proof_by_ids" ' + this.formatNonFungibleIds(e) + ' ResourceAddress("' + n + '");'), this;
  }
  burnBucket(r) {
    return this.instructions.push(`BURN_BUCKET Bucket("${r}");`), this;
  }
  mintFungible(r, e) {
    return this.instructions.push(`MINT_FUNGIBLE ResourceAddress("${r}") Decimal("${e}");`), this;
  }
  build() {
    return new Jt(this.instructions);
  }
  formatNonFungibleIds(r) {
    let e = r.map((n) => 'NonFungibleId("' + n + '")').join(", ");
    return "TreeSet<NonFungibleId>(" + e + ")";
  }
}
const Xt = () => {
  k.debug("🔵 wallet sdk instantiated");
  const t = Vt(), r = () => {
    k.debug("🔵🧹 destroying wallet sdk instance"), t.destroy();
  };
  return {
    ...{
      request: Kt(t.subjects),
      sendTransaction: Yt(t.subjects)
    },
    destroy: r,
    __subjects: t.subjects
  };
};

export default Xt;
export { Qt as ManifestBuilder };
